swagger: '2.0'
info:
  title: nodeForPsp_Service
  x-logo: 
    backgroundColor: #FFFFFF 
    url: "https://www.pagopa.gov.it/assets/images/pagopa-logo.png" 
  description: 
    $ref: description.md
  x-ibm-name: nodeforpspservice
  version: PagoPa API 1.2.46 - NodoSPC UAT version 1.1.63
schemes:
  - https
basePath: /nodeForPsp_Service
produces:
  - application/xml
consumes:
  - application/xml
x-ibm-configuration:
  type: wsdl
  phase: realized
  enforced: true
  testable: true
  gateway: datapower-gateway
  cors:
    enabled: true
  wsdl-definition:
    wsdl: nodeForPsp.wsdl
    service: nodeForPsp_Service
    port: nodeForPsp_Port
    soap-version: '1.1'
  assembly:
    execute:
      - proxy:
          title: proxy
          target-url: 'http://pagopa-api.pagopa.gov.it/service/node/nodeForPsp'
paths:
  /verifyPaymentNotice:
    post:
      summary: Operation verifyPaymentNotice
      description: >-
        Gets Payment Notice Data; a Payment Notice is identified by its QR-CODE
        data.


        The operation returns available payment options to the user. Each
        payment options desribes the acceptance `amount` values to be used
        requesting a payment activaction ( _see activetePayment_ ).
      operationId: verifyPaymentNotice
      parameters:
        - in: body
          name: body
          required: true
          schema:
            $ref: '#/definitions/verifyPaymentNoticeInput'
          description: >-
            ```
              <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:nod="http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd">
                <soapenv:Header/>
                <soapenv:Body>
                    <nod:verifyPaymentNoticeReq>
                      <idPSP>70000000001</idPSP>
                      <idBrokerPSP>70000000001</idBrokerPSP>
                      <idChannel>70000000001_01</idChannel>
                      <password>**********</password>
                      <qrCode>
                          <fiscalCode>77777777777</fiscalCode>
                          <noticeNumber>311018921337126000</noticeNumber>
                      </qrCode>
                    </nod:verifyPaymentNoticeReq>
                </soapenv:Body>
              </soapenv:Envelope>            
            ```
      responses:
        '200':
          description: verifyPaymentNoticeRes
          schema:
            $ref: '#/definitions/verifyPaymentNoticeOutput'
          examples:
            application/xml: >-
              <soapenv:Envelope xmlns:tns="http://pagopa-api.pagopa.gov.it/node/nodeForPsp.wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:nfpsp="http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
                <soapenv:Body>
                    <nfpsp:verifyPaymentNoticeRes>
                      <outcome>OK</outcome>
                      <paymentList>
                          <paymentOptionDescription>
                            <amount>10.00</amount>
                            <options>EQ</options>
                            <paymentNote>test</paymentNote>
                          </paymentOptionDescription>
                      </paymentList>
                      <paymentDescription>test</paymentDescription>
                      <fiscalCodePA>77777777777</fiscalCodePA>
                      <companyName>Pa Test</companyName>
                      <officeName>Office Test</officeName>
                    </nfpsp:verifyPaymentNoticeRes>
                </soapenv:Body>
              </soapenv:Envelope>
        '500':
          description: ''
          schema:
            $ref: '#/definitions/verifyPaymentNoticeFault'
        default:
          description: ''
          schema:
            $ref: '#/definitions/verifyPaymentNoticeOutput'
  /activatePaymentNotice:
    post:
      summary: Operation activatePaymentNotice
      description: >-
        Request a payment activation, it returns a paymentToken.


        Payment amount shall be equal to a payment option returned by
        `verifyPaymentNotice` ; if omitted,  it will setted by the public
        administration.

        The operation supports client idempotency for safely retrying requests
        without accidentally performing the same operation twice ( or to
        retrieve missed responses).

        The idempontency key works by saving the resulting status code and body
        of the first request made for any given idempotency key if its status is
        OK.

        Subsequent request with the same key return the same result, except for
        error codes. 


        An idempotency key is a unique value generated by the client which the
        server uses to recognize subsequent retries of the same request.

        How you create unique keys is up to you, but we suggest using a random
        string with enough entropy to avoid collisions. _(see `stIdempotencyKey`
        definition for details)_ 

        Keys are eligible to be removed from the system automatically after they
        are at least 24 hours old, and a new request is generated if a key is
        reused after the original has been pruned.

        The idempotency layer compares incoming parameters to those of the
        original request and errors unless they're the same to prevent
        accidental misuse.



        The Payment token is a unique key with no expiration date _( as default,
        see `expirationTime` definition for details)_ , and allow a PSP to start
        an user payment session. _(see `stPaymentToken` definition for details)_

        Until the receipt of a `sendPaymentOutcome`, any subsequent request for
        the same payment notice will be denied.
      operationId: activatePaymentNotice
      x-ibm-soap:
        soap-action: activatePaymentNotice
        soap-operation: >-
          {http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd}activatePaymentNoticeReq
      parameters:
        - in: body
          name: body
          required: true
          schema:
            $ref: '#/definitions/activatePaymentNoticeInput'
          description: >-
            ```
              <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:nod="http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd">
                <soapenv:Header/>
                <soapenv:Body>
                    <nod:activatePaymentNoticeReq>
                      <idPSP>70000000001</idPSP>
                      <idBrokerPSP>70000000001</idBrokerPSP>
                      <idChannel>70000000001_01</idChannel>
                      <password>**********</password>
                      <idempotencyKey>70000000001_100149bdWB</idempotencyKey>
                      <qrCode>
                          <fiscalCode>77777777777</fiscalCode>
                          <noticeNumber>311018921337126000</noticeNumber>
                      </qrCode>
                      <expirationTime>6000</expirationTime>
                      <amount>10.00</amount>
                    </nod:activatePaymentNoticeReq>
                </soapenv:Body>
              </soapenv:Envelope>        
            ```   
      responses:
        '200':
          description: activatePaymentNoticeRes
          schema:
            $ref: '#/definitions/activatePaymentNoticeOutput'
          examples:
            application/xml: >-      
              <soapenv:Envelope xmlns:tns="http://pagopa-api.pagopa.gov.it/node/nodeForPsp.wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:nfpsp="http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
                <soapenv:Body>
                    <nfpsp:activatePaymentNoticeRes>
                      <outcome>OK</outcome>
                      <totalAmount>10.00</totalAmount>
                      <paymentDescription>test</paymentDescription>
                      <fiscalCodePA>77777777777</fiscalCodePA>
                      <companyName>Pa Test</companyName>
                      <officeName>office</officeName>
                      <paymentToken>c110729d258c4ab1b765fe902aae41d6</paymentToken>
                      <transferList>
                          <transfer>
                            <idTransfer>1</idTransfer>
                            <transferAmount>10.00</transferAmount>
                            <fiscalCodePA>77777777777</fiscalCodePA>
                            <IBAN>IT45R0760103200000000001016</IBAN>
                            <remittanceInformation>test</remittanceInformation>
                          </transfer>
                      </transferList>
                      <creditorReferenceId>123456789</creditorReferenceId>
                    </nfpsp:activatePaymentNoticeRes>
                </soapenv:Body>
              </soapenv:Envelope>
        '500':
          description: ''
          schema:
            $ref: '#/definitions/activatePaymentNoticeFault'
        default:
          description: ''
          schema:
            $ref: '#/definitions/activatePaymentNoticeOutput'
  /sendPaymentOutcome:
    post:
      summary: Operation sendPaymentOutcome
      description: >-
        Close payment session associated with the paymentToken.

        The outcome can be positive or negative.


        if **positive**, the psp SHALL fill the _details_


        The operation use the paymentToken as idempotency key for safely
        retrying requests without accidentally performing the same operation
        twice ( or to retrieve missed responses).

        The idempotency layer compares incoming parameters to those of the
        original request and errors unless they're the same to prevent
        accidental misuse.
      operationId: sendPaymentOutcome
      x-ibm-soap:
        soap-action: sendPaymentOutcome
        soap-operation: >-
          {http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd}sendPaymentOutcomeReq
      parameters:
        - in: body
          name: body
          required: true
          schema:
            $ref: '#/definitions/sendPaymentOutcomeInput'
          description: >-
            ```
              <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:nod="http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd">
                <soapenv:Header/>
                <soapenv:Body>
                    <nod:sendPaymentOutcomeReq>
                      <idPSP>70000000001</idPSP>
                      <idBrokerPSP>70000000001</idBrokerPSP>
                      <idChannel>70000000001_01</idChannel>
                      <password>**********</password>
                      <paymentToken>c110729d258c4ab1b765fe902aae41d6</paymentToken>
                      <outcome>OK</outcome>
                      <!--Optional:-->
                      <details>
                          <paymentMethod>creditCard</paymentMethod>
                          <!--Optional:-->
                          <paymentChannel>app</paymentChannel>
                          <fee>2.00</fee>
                          <!--Optional:-->
                          <payer>
                            <uniqueIdentifier>
                                <entityUniqueIdentifierType>G</entityUniqueIdentifierType>
                                <entityUniqueIdentifierValue>77777777777_01</entityUniqueIdentifierValue>
                            </uniqueIdentifier>
                            <fullName>name</fullName>
                            <!--Optional:-->
                            <streetName>street</streetName>
                            <!--Optional:-->
                            <civicNumber>civic</civicNumber>
                            <!--Optional:-->
                            <postalCode>postal</postalCode>
                            <!--Optional:-->
                            <city>city</city>
                            <!--Optional:-->
                            <stateProvinceRegion>state</stateProvinceRegion>
                            <!--Optional:-->
                            <country>IT</country>
                            <!--Optional:-->
                            <e-mail>prova@test.it</e-mail>
                          </payer>
                          <applicationDate>2021-12-12</applicationDate>
                          <transferDate>2021-12-11</transferDate>
                      </details>
                    </nod:sendPaymentOutcomeReq>
                </soapenv:Body>
              </soapenv:Envelope>        
            ```            
      responses:
        '200':
          description: sendPaymentOutcomeRes
          schema:
            $ref: '#/definitions/sendPaymentOutcomeOutput'
          examples:
            application/xml: >-  
              <soapenv:Envelope xmlns:tns="http://pagopa-api.pagopa.gov.it/node/nodeForPsp.wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:nfpsp="http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
                <soapenv:Body>
                    <nfpsp:sendPaymentOutcomeRes>
                      <outcome>OK</outcome>
                    </nfpsp:sendPaymentOutcomeRes>
                </soapenv:Body>
              </soapenv:Envelope>
        '500':
          description: ''
          schema:
            $ref: '#/definitions/sendPaymentOutcomeFault'
        default:
          description: ''
          schema:
            $ref: '#/definitions/sendPaymentOutcomeOutput'
definitions:
  Security:
    xml:
      namespace: >-
        http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd
      prefix: wsse
    description: Header for WS-Security
    type: object
    properties:
      UsernameToken:
        xml:
          namespace: >-
            http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd
          prefix: wsse
        type: object
        properties:
          Username:
            xml:
              namespace: >-
                http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd
              prefix: wsse
            type: string
          Password:
            xml:
              namespace: >-
                http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd
              prefix: wsse
            type: string
          Nonce:
            xml:
              namespace: >-
                http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd
              prefix: wsse
            type: string
            properties:
              EncodingType:
                xml:
                  namespace: ''
                  attribute: true
                type: string
          Created:
            xml:
              namespace: >-
                http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd
              prefix: wsu
            type: string
      Timestamp:
        xml:
          namespace: >-
            http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd
          prefix: wsu
        type: object
        properties:
          Created:
            xml:
              namespace: >-
                http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd
              prefix: wsu
            type: string
          Expires:
            xml:
              namespace: >-
                http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd
              prefix: wsu
            type: string
          Id:
            xml:
              namespace: >-
                http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd
              prefix: wsu
              attribute: true
            type: string
  NewMessagePPP:
    description: opopopopop
  verifyPaymentNoticeInput:
    description: Input message for wsdl operation verifyPaymentNoticeReq
    type: object
    properties:
      Envelope:
        xml:
          namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
          prefix: soapenv
        type: object
        properties:
          Header:
            $ref: '#/definitions/verifyPaymentNoticeHeader'
          Body:
            xml:
              namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
              prefix: soapenv
            type: object
            properties:
              verifyPaymentNoticeReq:
                $ref: '#/definitions/verifyPaymentNoticeReq_element_nfpsp'
            required:
              - verifyPaymentNoticeReq
        required:
          - Body
    required:
      - Envelope
    x-ibm-schema:
      wsdl-port: '{http://pagopa-api.pagopa.gov.it/node/nodeForPsp.wsdl}nodeForPsp_Port'
      wsdl-operation: verifyPaymentNoticeReq
      wsdl-message-direction-or-name: verifyPaymentNoticeReqRequest
  verifyPaymentNoticeHeader:
    description: Input headers for wsdl operation verifyPaymentNoticeReq
    type: object
    properties:
      Security:
        $ref: '#/definitions/Security'
  verifyPaymentNoticeOutput:
    description: Output message for wsdl operation verifyPaymentNoticeReq
    type: object
    properties:
      Envelope:
        xml:
          namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
          prefix: soapenv
        type: object
        properties:
          Body:
            xml:
              namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
              prefix: soapenv
            type: object
            properties:
              verifyPaymentNoticeRes:
                $ref: '#/definitions/verifyPaymentNoticeRes_element_nfpsp'
        required:
          - Body
    required:
      - Envelope
    x-ibm-schema:
      wsdl-port: '{http://pagopa-api.pagopa.gov.it/node/nodeForPsp.wsdl}nodeForPsp_Port'
      wsdl-operation: verifyPaymentNoticeReq
      wsdl-message-direction-or-name: verifyPaymentNoticeReqResponse
  verifyPaymentNoticeFault:
    description: Fault message for wsdl operation verifyPaymentNoticeReq
    type: object
    properties:
      Envelope:
        xml:
          namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
          prefix: soapenv
        type: object
        properties:
          Body:
            xml:
              namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
              prefix: soapenv
            type: object
            properties:
              Fault:
                xml:
                  namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
                  prefix: soapenv
                type: object
                properties:
                  faultcode:
                    xml:
                      namespace: ''
                    type: string
                  faultstring:
                    xml:
                      namespace: ''
                    type: string
                  faultactor:
                    xml:
                      namespace: ''
                    type: string
                  detail:
                    xml:
                      namespace: ''
                      prefix: ''
                    type: object
                    properties:
                      handledException:
                        $ref: '#/definitions/handledException_tns'
        required:
          - Body
    required:
      - Envelope
    x-ibm-schema:
      wsdl-port: '{http://pagopa-api.pagopa.gov.it/node/nodeForPsp.wsdl}nodeForPsp_Port'
      wsdl-operation: verifyPaymentNoticeReq
      wsdl-message-direction-or-name: handledException
  activatePaymentNoticeInput:
    description: Input message for wsdl operation activatePaymentNoticeReq
    type: object
    properties:
      Envelope:
        xml:
          namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
          prefix: soapenv
        type: object
        properties:
          Header:
            $ref: '#/definitions/activatePaymentNoticeHeader'
          Body:
            xml:
              namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
              prefix: soapenv
            type: object
            properties:
              activatePaymentNoticeReq:
                $ref: '#/definitions/activatePaymentNoticeReq_element_nfpsp'
            required:
              - activatePaymentNoticeReq
        required:
          - Body
    required:
      - Envelope
    x-ibm-schema:
      wsdl-port: '{http://pagopa-api.pagopa.gov.it/node/nodeForPsp.wsdl}nodeForPsp_Port'
      wsdl-operation: activatePaymentNoticeReq
      wsdl-message-direction-or-name: activatePaymentNoticeReqRequest
  activatePaymentNoticeHeader:
    description: Input headers for wsdl operation activatePaymentNoticeReq
    type: object
    properties:
      Security:
        $ref: '#/definitions/Security'
  activatePaymentNoticeOutput:
    description: Output message for wsdl operation activatePaymentNoticeReq
    type: object
    properties:
      Envelope:
        xml:
          namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
          prefix: soapenv
        type: object
        properties:
          Body:
            xml:
              namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
              prefix: soapenv
            type: object
            properties:
              activatePaymentNoticeRes:
                $ref: '#/definitions/activatePaymentNoticeRes_element_nfpsp'
        required:
          - Body
    required:
      - Envelope
  activatePaymentNoticeFault:
    description: Fault message for wsdl operation activatePaymentNoticeReq
    type: object
    properties:
      Envelope:
        xml:
          namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
          prefix: soapenv
        type: object
        properties:
          Body:
            xml:
              namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
              prefix: soapenv
            type: object
            properties:
              Fault:
                xml:
                  namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
                  prefix: soapenv
                type: object
                properties:
                  faultcode:
                    xml:
                      namespace: ''
                    type: string
                  faultstring:
                    xml:
                      namespace: ''
                    type: string
                  faultactor:
                    xml:
                      namespace: ''
                    type: string
                  detail:
                    xml:
                      namespace: ''
                      prefix: ''
                    type: object
                    properties:
                      handledException:
                        $ref: '#/definitions/handledException_tns'
        required:
          - Body
    required:
      - Envelope
    x-ibm-schema:
      wsdl-port: '{http://pagopa-api.pagopa.gov.it/node/nodeForPsp.wsdl}nodeForPsp_Port'
      wsdl-operation: activatePaymentNoticeReq
      wsdl-message-direction-or-name: handledException
  sendPaymentOutcomeInput:
    description: Input message for wsdl operation sendPaymentOutcomeReq
    type: object
    properties:
      Envelope:
        xml:
          namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
          prefix: soapenv
        type: object
        properties:
          Header:
            $ref: '#/definitions/sendPaymentOutcomeHeader'
          Body:
            xml:
              namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
              prefix: soapenv
            type: object
            properties:
              sendPaymentOutcomeReq:
                $ref: '#/definitions/sendPaymentOutcomeReq_element_nfpsp'
            required:
              - sendPaymentOutcomeReq
        required:
          - Body
    required:
      - Envelope
  sendPaymentOutcomeHeader:
    description: Input headers for wsdl operation sendPaymentOutcomeReq
    type: object
    properties:
      Security:
        $ref: '#/definitions/Security'
  sendPaymentOutcomeOutput:
    description: Output message for wsdl operation sendPaymentOutcomeReq
    type: object
    properties:
      Envelope:
        xml:
          namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
          prefix: soapenv
        type: object
        properties:
          Body:
            xml:
              namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
              prefix: soapenv
            type: object
            properties:
              sendPaymentOutcomeRes:
                $ref: '#/definitions/sendPaymentOutcomeRes_element_nfpsp'
        required:
          - Body
    required:
      - Envelope
  sendPaymentOutcomeFault:
    description: Fault message for wsdl operation sendPaymentOutcomeReq
    type: object
    properties:
      Envelope:
        xml:
          namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
          prefix: soapenv
        type: object
        properties:
          Body:
            xml:
              namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
              prefix: soapenv
            type: object
            properties:
              Fault:
                xml:
                  namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
                  prefix: soapenv
                type: object
                properties:
                  faultcode:
                    xml:
                      namespace: ''
                    type: string
                  faultstring:
                    xml:
                      namespace: ''
                    type: string
                  faultactor:
                    xml:
                      namespace: ''
                    type: string
                  detail:
                    xml:
                      namespace: ''
                      prefix: ''
                    type: object
                    properties:
                      handledException:
                        $ref: '#/definitions/handledException_tns'
        required:
          - Body
    required:
      - Envelope
    x-ibm-schema:
      wsdl-port: '{http://pagopa-api.pagopa.gov.it/node/nodeForPsp.wsdl}nodeForPsp_Port'
      wsdl-operation: sendPaymentOutcomeReq
      wsdl-message-direction-or-name: handledException
  verifyPaymentNoticeReq_element_nfpsp:
    xml:
      namespace: 'http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd'
      prefix: nfpsp
      name: verifyPaymentNoticeReq
    type: object
    properties:
      idPSP:
        $ref: '#/definitions/stIdPSP_type_nfpsp'
      idBrokerPSP:
        $ref: '#/definitions/stIdBroker_type_nfpsp'
      idChannel:
        $ref: '#/definitions/stIdChannel_type_nfpsp'
      password:
        $ref: '#/definitions/stPassword_type_nfpsp'
      qrCode:
        $ref: '#/definitions/ctQrCode_type_nfpsp'
    required:
      - idPSP
      - idBrokerPSP
      - idChannel
      - password
      - qrCode
  verifyPaymentNoticeRes_element_nfpsp:
    xml:
      namespace: 'http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd'
      prefix: nfpsp
      name: verifyPaymentNoticeRes
    allOf:
      - $ref: '#/definitions/ctResponse_type_nfpsp'
      - type: object
        properties:
          paymentList:
            $ref: '#/definitions/ctPaymentOptionsDescriptionList_type_nfpsp'
          paymentDescription:
            $ref: '#/definitions/stText210_type_nfpsp'
            description: full text description
          fiscalCodePA:
            $ref: '#/definitions/stFiscalCodePA_type_nfpsp'
            description: >-
              tax code of the public administration to which the payment
              notification is made out
          companyName:
            $ref: '#/definitions/stText140_type_nfpsp'
            description: Public Administration full name
          officeName:
            $ref: '#/definitions/stText140_type_nfpsp'
            description: Public Admninistration Department Name
  handledException_tns:
    xml:
      namespace: 'http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd'
      prefix: nfpsp
      name: handledException
    type: object
    properties:
      originalFaultCode:
        xml:
          namespace: ''
        type: string
      originalFaultString:
        xml:
          namespace: ''
        type: string
      originalDescription:
        xml:
          namespace: ''
        type: string
  activatePaymentNoticeReq_element_nfpsp:
    xml:
      namespace: 'http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd'
      prefix: nfpsp
      name: activatePaymentNoticeReq
    type: object
    properties:
      idPSP:
        $ref: '#/definitions/stIdPSP_type_nfpsp'
      idBrokerPSP:
        $ref: '#/definitions/stIdBroker_type_nfpsp'
      idChannel:
        $ref: '#/definitions/stIdChannel_type_nfpsp'
      password:
        $ref: '#/definitions/stPassword_type_nfpsp'
      idempotencyKey:
        $ref: '#/definitions/stIdempotencyKey_type_nfpsp'
      qrCode:
        $ref: '#/definitions/ctQrCode_type_nfpsp'
      expirationTime:
        $ref: '#/definitions/stExpirationTime_type_nfpsp'
      amount:
        $ref: '#/definitions/stAmount_type_nfpsp'
      dueDate:
        $ref: '#/definitions/stISODate_type_nfpsp'
      paymentNote:
        $ref: '#/definitions/stText210_type_nfpsp'
    required:
      - idPSP
      - idBrokerPSP
      - idChannel
      - password
      - idempotencyKey
      - qrCode
  activatePaymentNoticeRes_element_nfpsp:
    xml:
      namespace: 'http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd'
      prefix: nfpsp
      name: activatePaymentNoticeRes
    allOf:
      - $ref: '#/definitions/ctResponse_type_nfpsp'
      - type: object
        properties:
          totalAmount:
            $ref: '#/definitions/stAmount_type_nfpsp'
          paymentDescription:
            $ref: '#/definitions/stText140_type_nfpsp'
          fiscalCodePA:
            $ref: '#/definitions/stFiscalCodePA_type_nfpsp'
          companyName:
            $ref: '#/definitions/stText140_type_nfpsp'
          officeName:
            $ref: '#/definitions/stText140_type_nfpsp'
          paymentToken:
            $ref: '#/definitions/stPaymentToken_type_nfpsp'
          transferList:
            $ref: '#/definitions/ctTransferListPSP_type_nfpsp'
          creditorReferenceId:
            $ref: '#/definitions/stText35_type_nfpsp'
  sendPaymentOutcomeReq_element_nfpsp:
    xml:
      namespace: 'http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd'
      prefix: nfpsp
      name: sendPaymentOutcomeReq
    type: object
    properties:
      idPSP:
        $ref: '#/definitions/stIdPSP_type_nfpsp'
      idBrokerPSP:
        $ref: '#/definitions/stIdBroker_type_nfpsp'
      idChannel:
        $ref: '#/definitions/stIdChannel_type_nfpsp'
      password:
        $ref: '#/definitions/stPassword_type_nfpsp'
      paymentToken:
        $ref: '#/definitions/stPaymentToken_type_nfpsp'
      outcome:
        $ref: '#/definitions/stOutcome_type_nfpsp'
      details:
        $ref: '#/definitions/ctOutcomeDetails_type_nfpsp'
    required:
      - idPSP
      - idBrokerPSP
      - idChannel
      - password
      - paymentToken
      - outcome
  sendPaymentOutcomeRes_element_nfpsp:
    xml:
      namespace: 'http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd'
      prefix: nfpsp
      name: sendPaymentOutcomeRes
    allOf:
      - $ref: '#/definitions/ctResponse_type_nfpsp'
      - type: object
        properties: {}
  stIdPSP_type_nfpsp:
    xml:
      namespace: ''
    description: 'PSP Identifier, it has been assigned from pagoPA.'
    type: string
    minLength: 1
    maxLength: 35
    x-xsi-type: stIdPSP
    x-xsi-type-xml:
      namespace: 'http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd'
      prefix: nfpsp
    x-xsi-type-uniquename: stIdPSP_type_nfpsp
  stIdBroker_type_nfpsp:
    xml:
      namespace: ''
    description: 'Broker Identifier, it has been assigned from pagoPA.'
    type: string
    minLength: 1
    maxLength: 35
    x-xsi-type: stIdBroker
    x-xsi-type-xml:
      namespace: 'http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd'
      prefix: nfpsp
    x-xsi-type-uniquename: stIdBroker_type_nfpsp
  stIdChannel_type_nfpsp:
    xml:
      namespace: ''
    description: 'Channel Identifier, it identifies a payment service category'
    type: string
    minLength: 1
    maxLength: 35
    x-xsi-type: stIdChannel
    x-xsi-type-xml:
      namespace: 'http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd'
      prefix: nfpsp
    x-xsi-type-uniquename: stIdChannel_type_nfpsp
  stPassword_type_nfpsp:
    xml:
      namespace: ''
    description: 'channel password, it has been assigned from pagoPA'
    type: string
    minLength: 8
    maxLength: 15
    x-xsi-type: stPassword
    x-xsi-type-xml:
      namespace: 'http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd'
      prefix: nfpsp
    x-xsi-type-uniquename: stPassword_type_nfpsp
  ctQrCode_type_nfpsp:
    xml:
      namespace: ''
      prefix: ''
    description: |-
      Payment Notice QR-CODE data.
      QR-CODE is ISO/IEC 18004:2015 compliant generated with:

      - Symbol Version : 4
      - Modules : 33x33
      - Modules width : 3 pixels
      - ECC Level: M ( max correction error 15%)
      - Character set : UTF-8

      QR-CODE contains a string formatted as :
      `PAGOPA|002|noticeNumber|fiscalCode|amount`

      the notice number is composed by:

      `[auxDigit][segregationCode][IUVBase][IUVCheckDigit]`
    type: object
    properties:
      fiscalCode:
        $ref: '#/definitions/stFiscalCodePA_type_nfpsp'
      noticeNumber:
        $ref: '#/definitions/stNoticeNumber_type_nfpsp'
    required:
      - fiscalCode
      - noticeNumber
    x-xsi-type: ctQrCode
    x-xsi-type-xml:
      namespace: 'http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd'
      prefix: nfpsp
    x-xsi-type-uniquename: ctQrCode_type_nfpsp
  ctPaymentOptionsDescriptionList_type_nfpsp:
    xml:
      namespace: ''
      prefix: ''
    type: object
    properties:
      paymentOptionDescription:
        type: array
        minItems: 1
        maxItems: 5
        items:
          $ref: '#/definitions/ctPaymentOptionDescription_type_nfpsp'
    required:
      - paymentOptionDescription
    x-xsi-type: ctPaymentOptionsDescriptionList
    x-xsi-type-xml:
      namespace: 'http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd'
      prefix: nfpsp
    x-xsi-type-uniquename: ctPaymentOptionsDescriptionList_type_nfpsp
  stText210_type_nfpsp:
    xml:
      namespace: ''
    type: string
    minLength: 1
    maxLength: 210
    x-xsi-type: stText210
    x-xsi-type-xml:
      namespace: 'http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd'
      prefix: nfpsp
    x-xsi-type-uniquename: stText210_type_nfpsp
  stFiscalCodePA_type_nfpsp:
    xml:
      namespace: ''
    type: string
    pattern: '[0-9]{11}'
    minLength: 11
    maxLength: 11
    x-xsi-type: stFiscalCodePA
    x-xsi-type-xml:
      namespace: 'http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd'
      prefix: nfpsp
    x-xsi-type-uniquename: stFiscalCodePA_type_nfpsp
  stText140_type_nfpsp:
    xml:
      namespace: ''
    type: string
    minLength: 1
    maxLength: 140
    x-xsi-type: stText140
    x-xsi-type-xml:
      namespace: 'http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd'
      prefix: nfpsp
    x-xsi-type-uniquename: stText140_type_nfpsp
  stIdempotencyKey_type_nfpsp:
    xml:
      namespace: ''
    description: |-
      `IdempotencyKey`, it has been genearated from PSP.
                      It's obtained as concatenation of the PSP' fiscal code followed by a `_` and a unique random string within PSP, that generated it
    type: string
    pattern: '[0-9]{11}_[a-zA-Z0-9]{10}'
    x-xsi-type: stIdempotencyKey
    x-xsi-type-xml:
      namespace: 'http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd'
      prefix: nfpsp
    x-xsi-type-uniquename: stIdempotencyKey_type_nfpsp
  stExpirationTime_type_nfpsp:
    xml:
      namespace: ''
    description: 'expiration time ( ms ), max 30 minute'
    type: number
    maximum: 1800000
    x-xsi-type: stExpirationTime
    x-xsi-type-xml:
      namespace: 'http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd'
      prefix: nfpsp
    x-xsi-type-uniquename: stExpirationTime_type_nfpsp
  stAmount_type_nfpsp:
    xml:
      namespace: ''
    description: Amount of payment in euro
    type: number
    maximum: 999999999.99
    pattern: '\d+\.\d{2}'
    x-xsi-type: stAmount
    x-xsi-type-xml:
      namespace: 'http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd'
      prefix: nfpsp
    x-xsi-type-uniquename: stAmount_type_nfpsp
  stISODate_type_nfpsp:
    xml:
      namespace: ''
    type: string
    format: date
    x-xsi-type: stISODate
    x-xsi-type-xml:
      namespace: 'http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd'
      prefix: nfpsp
    x-xsi-type-uniquename: stISODate_type_nfpsp
  stPaymentToken_type_nfpsp:
    xml:
      namespace: ''
    type: string
    minLength: 1
    maxLength: 35
    x-xsi-type: stPaymentToken
    x-xsi-type-xml:
      namespace: 'http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd'
      prefix: nfpsp
    x-xsi-type-uniquename: stPaymentToken_type_nfpsp
  ctTransferListPSP_type_nfpsp:
    xml:
      namespace: ''
      prefix: ''
    type: object
    properties:
      transfer:
        type: array
        minItems: 1
        maxItems: 5
        items:
          $ref: '#/definitions/ctTransferPSP_type_nfpsp'
    required:
      - transfer
    x-xsi-type: ctTransferListPSP
    x-xsi-type-xml:
      namespace: 'http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd'
      prefix: nfpsp
    x-xsi-type-uniquename: ctTransferListPSP_type_nfpsp
  stText35_type_nfpsp:
    xml:
      namespace: ''
    type: string
    minLength: 1
    maxLength: 35
    x-xsi-type: stText35
    x-xsi-type-xml:
      namespace: 'http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd'
      prefix: nfpsp
    x-xsi-type-uniquename: stText35_type_nfpsp
  stOutcome_type_nfpsp:
    xml:
      namespace: ''
    type: string
    enum:
      - OK
      - KO
    x-xsi-type: stOutcome
    x-xsi-type-xml:
      namespace: 'http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd'
      prefix: nfpsp
    x-xsi-type-uniquename: stOutcome_type_nfpsp
  ctOutcomeDetails_type_nfpsp:
    xml:
      namespace: ''
      prefix: ''
    type: object
    properties:
      paymentMethod:
        $ref: '#/definitions/stPaymentMethod_type_nfpsp'
      paymentChannel:
        $ref: '#/definitions/stPaymentChannel_type_nfpsp'
      fee:
        $ref: '#/definitions/stAmount_type_nfpsp'
      payer:
        $ref: '#/definitions/ctSubject_type_nfpsp'
      applicationDate:
        $ref: '#/definitions/stISODate_type_nfpsp'
      transferDate:
        $ref: '#/definitions/stISODate_type_nfpsp'
    required:
      - paymentMethod
      - fee
      - applicationDate
      - transferDate
    x-xsi-type: ctOutcomeDetails
    x-xsi-type-xml:
      namespace: 'http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd'
      prefix: nfpsp
    x-xsi-type-uniquename: ctOutcomeDetails_type_nfpsp
  ctFaultBean_type_nfpsp:
    xml:
      namespace: ''
      prefix: ''
    type: object
    properties:
      faultCode:
        xml:
          namespace: ''
        type: string
      faultString:
        xml:
          namespace: ''
        type: string
      id:
        xml:
          namespace: ''
        type: string
      description:
        xml:
          namespace: ''
        type: string
      serial:
        xml:
          namespace: ''
        type: integer
        format: int32
      originalFaultCode:
        xml:
          namespace: ''
        type: string
      originalFaultString:
        xml:
          namespace: ''
        type: string
      originalDescription:
        xml:
          namespace: ''
        type: string
    required:
      - faultCode
      - faultString
      - id
    x-xsi-type: ctFaultBean
    x-xsi-type-xml:
      namespace: 'http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd'
      prefix: nfpsp
    x-xsi-type-uniquename: ctFaultBean_type_nfpsp
  stNoticeNumber_type_nfpsp:
    xml:
      namespace: ''
    type: string
    pattern: '[0-9]{18}'
    x-xsi-type: stNoticeNumber
    x-xsi-type-xml:
      namespace: 'http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd'
      prefix: nfpsp
    x-xsi-type-uniquename: stNoticeNumber_type_nfpsp
  ctPaymentOptionDescription_type_nfpsp:
    xml:
      namespace: ''
      prefix: ''
    type: object
    properties:
      amount:
        $ref: '#/definitions/stAmount_type_nfpsp'
      options:
        $ref: '#/definitions/stAmountOptionPSP_type_nfpsp'
      dueDate:
        $ref: '#/definitions/stISODate_type_nfpsp'
      paymentNote:
        $ref: '#/definitions/stText210_type_nfpsp'
    required:
      - amount
      - options
    x-xsi-type: ctPaymentOptionDescription
    x-xsi-type-xml:
      namespace: 'http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd'
      prefix: nfpsp
    x-xsi-type-uniquename: ctPaymentOptionDescription_type_nfpsp
  ctTransferPSP_type_nfpsp:
    xml:
      namespace: ''
      prefix: ''
    type: object
    properties:
      idTransfer:
        $ref: '#/definitions/stIdTransfer_type_nfpsp'
      transferAmount:
        $ref: '#/definitions/stAmount_type_nfpsp'
      fiscalCodePA:
        $ref: '#/definitions/stFiscalCodePA_type_nfpsp'
      IBAN:
        $ref: '#/definitions/stIBAN_type_nfpsp'
      remittanceInformation:
        $ref: '#/definitions/stText140_type_nfpsp'
    required:
      - idTransfer
      - transferAmount
      - fiscalCodePA
      - IBAN
      - remittanceInformation
    x-xsi-type: ctTransferPSP
    x-xsi-type-xml:
      namespace: 'http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd'
      prefix: nfpsp
    x-xsi-type-uniquename: ctTransferPSP_type_nfpsp
  stPaymentMethod_type_nfpsp:
    xml:
      namespace: ''
    type: string
    enum:
      - cash
      - creditCard
      - bancomat
      - other
    x-xsi-type: stPaymentMethod
    x-xsi-type-xml:
      namespace: 'http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd'
      prefix: nfpsp
    x-xsi-type-uniquename: stPaymentMethod_type_nfpsp
  stPaymentChannel_type_nfpsp:
    xml:
      namespace: ''
    type: string
    enum:
      - frontOffice
      - atm
      - onLine
      - app
      - other
    x-xsi-type: stPaymentChannel
    x-xsi-type-xml:
      namespace: 'http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd'
      prefix: nfpsp
    x-xsi-type-uniquename: stPaymentChannel_type_nfpsp
  ctSubject_type_nfpsp:
    xml:
      namespace: ''
      prefix: ''
    type: object
    properties:
      uniqueIdentifier:
        $ref: '#/definitions/ctEntityUniqueIdentifier_type_nfpsp'
      fullName:
        $ref: '#/definitions/stText70_type_nfpsp'
      streetName:
        $ref: '#/definitions/stText70_type_nfpsp'
      civicNumber:
        $ref: '#/definitions/stText16_type_nfpsp'
      postalCode:
        $ref: '#/definitions/stText16_type_nfpsp'
      city:
        $ref: '#/definitions/stText35_type_nfpsp'
      stateProvinceRegion:
        $ref: '#/definitions/stText35_type_nfpsp'
      country:
        $ref: '#/definitions/stNazioneProvincia_type_nfpsp'
      e-mail:
        $ref: '#/definitions/stEMail_type_nfpsp'
    required:
      - uniqueIdentifier
      - fullName
    x-xsi-type: ctSubject
    x-xsi-type-xml:
      namespace: 'http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd'
      prefix: nfpsp
    x-xsi-type-uniquename: ctSubject_type_nfpsp
  stAmountOptionPSP_type_nfpsp:
    xml:
      namespace: ''
    type: string
    enum:
      - EQ
      - LS
      - GT
      - ANY
    x-xsi-type: stAmountOptionPSP
    x-xsi-type-xml:
      namespace: 'http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd'
      prefix: nfpsp
    x-xsi-type-uniquename: stAmountOptionPSP_type_nfpsp
  stIdTransfer_type_nfpsp:
    xml:
      namespace: ''
    type: integer
    format: int32
    enum:
      - 1
      - 2
      - 3
      - 4
      - 5
    x-xsi-type: stIdTransfer
    x-xsi-type-xml:
      namespace: 'http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd'
      prefix: nfpsp
    x-xsi-type-uniquename: stIdTransfer_type_nfpsp
  stIBAN_type_nfpsp:
    xml:
      namespace: ''
    type: string
    pattern: '[a-zA-Z]{2,2}[0-9]{2,2}[a-zA-Z0-9]{1,30}'
    x-xsi-type: stIBAN
    x-xsi-type-xml:
      namespace: 'http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd'
      prefix: nfpsp
    x-xsi-type-uniquename: stIBAN_type_nfpsp
  ctEntityUniqueIdentifier_type_nfpsp:
    xml:
      namespace: ''
      prefix: ''
    type: object
    properties:
      entityUniqueIdentifierType:
        $ref: '#/definitions/stEntityUniqueIdentifierType_type_nfpsp'
      entityUniqueIdentifierValue:
        $ref: '#/definitions/stEntityUniqueIdentifierValue_type_nfpsp'
    required:
      - entityUniqueIdentifierType
      - entityUniqueIdentifierValue
    x-xsi-type: ctEntityUniqueIdentifier
    x-xsi-type-xml:
      namespace: 'http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd'
      prefix: nfpsp
    x-xsi-type-uniquename: ctEntityUniqueIdentifier_type_nfpsp
  stText70_type_nfpsp:
    xml:
      namespace: ''
    type: string
    minLength: 1
    maxLength: 70
    x-xsi-type: stText70
    x-xsi-type-xml:
      namespace: 'http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd'
      prefix: nfpsp
    x-xsi-type-uniquename: stText70_type_nfpsp
  stText16_type_nfpsp:
    xml:
      namespace: ''
    type: string
    minLength: 1
    maxLength: 16
    x-xsi-type: stText16
    x-xsi-type-xml:
      namespace: 'http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd'
      prefix: nfpsp
    x-xsi-type-uniquename: stText16_type_nfpsp
  stNazioneProvincia_type_nfpsp:
    xml:
      namespace: ''
    type: string
    pattern: '[A-Z]{2,2}'
    x-xsi-type: stNazioneProvincia
    x-xsi-type-xml:
      namespace: 'http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd'
      prefix: nfpsp
    x-xsi-type-uniquename: stNazioneProvincia_type_nfpsp
  stEMail_type_nfpsp:
    xml:
      namespace: ''
    type: string
    pattern: '[a-zA-Z0-9_\.\+\-]+@[a-zA-Z0-9\-]+(\.[a-zA-Z0-9\-]+)*'
    maxLength: 256
    x-xsi-type: stEMail
    x-xsi-type-xml:
      namespace: 'http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd'
      prefix: nfpsp
    x-xsi-type-uniquename: stEMail_type_nfpsp
  stEntityUniqueIdentifierType_type_nfpsp:
    xml:
      namespace: ''
    type: string
    enum:
      - F
      - G
    minLength: 1
    maxLength: 1
    x-xsi-type: stEntityUniqueIdentifierType
    x-xsi-type-xml:
      namespace: 'http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd'
      prefix: nfpsp
    x-xsi-type-uniquename: stEntityUniqueIdentifierType_type_nfpsp
  stEntityUniqueIdentifierValue_type_nfpsp:
    xml:
      namespace: ''
    type: string
    minLength: 2
    maxLength: 16
    x-xsi-type: stEntityUniqueIdentifierValue
    x-xsi-type-xml:
      namespace: 'http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd'
      prefix: nfpsp
    x-xsi-type-uniquename: stEntityUniqueIdentifierValue_type_nfpsp
  ctResponse_type_nfpsp:
    xml:
      namespace: ''
      prefix: ''
    type: object
    properties:
      outcome:
        $ref: '#/definitions/stOutcome_type_nfpsp'
      fault:
        $ref: '#/definitions/ctFaultBean_type_nfpsp'
    required:
      - outcome
    x-ibm-discriminator: true
    x-xsi-type: ctResponse
    x-xsi-type-xml:
      namespace: 'http://pagopa-api.pagopa.gov.it/node/nodeForPsp.xsd'
      prefix: nfpsp
    x-xsi-type-uniquename: ctResponse_type_nfpsp
